<div class="container mt-4">
  <div class="card mb-4">
    <div class="card-body d-flex justify-content-between align-items-center">
      <h4>Olá, {{ currentUser?.name || 'Paciente' }}!</h4>
      <div class="text-end">
        <h5>Seu Saldo de Pontos</h5>
        <h3 class="text-primary">{{ pacienteInfo?.pontos ?? '...' }}</h3>
      </div>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-md-4">
      <div class="card text-center h-100">
        <div class="card-body">
          <i class="bi bi-calendar-plus fs-1 text-success"></i>
          <h5 class="card-title mt-2">Agendar Nova Consulta</h5>
          <p class="card-text">Encontre especialistas e marque sua próxima consulta.</p>
          <a routerLink="/paciente/agendar" class="btn btn-success">Agendar</a>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card text-center h-100">
        <div class="card-body">
          <i class="bi bi-gem fs-1 text-info"></i>
          <h5 class="card-title mt-2">Comprar Pontos</h5>
          <p class="card-text">Adquira pontos para obter descontos em suas consultas.</p>
          <a routerLink="/paciente/comprar-pontos" class="btn btn-info">Comprar</a>
        </div>
      </div>
    </div>
     <div class="col-md-4">
      <div class="card text-center h-100">
        <div class="card-body">
          <i class="bi bi-receipt fs-1 text-warning"></i>
          <h5 class="card-title mt-2">Ver Extrato</h5>
          <p class="card-text">Acompanhe o histórico de suas transações de pontos.</p>
          <a routerLink="/paciente/extrato-pontos" class="btn btn-warning">Ver Extrato</a>
        </div>
      </div>
    </div>
  </div>


  <div class="card">
    <div class="card-header">
      <h5>Meus Agendamentos</h5>
    </div>
    <div class="card-body">
      <ul class="nav nav-tabs" id="agendamentoTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="futuros-tab" data-bs-toggle="tab" data-bs-target="#futuros" type="button" role="tab">Próximos</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="realizados-tab" data-bs-toggle="tab" data-bs-target="#realizados" type="button" role="tab">Realizados</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="cancelados-tab" data-bs-toggle="tab" data-bs-target="#cancelados" type="button" role="tab">Cancelados/Faltas</button>
        </li>
      </ul>

      <div class="tab-content" id="myTabContent">
        <div class="tab-pane fade show active" id="futuros" role="tabpanel">
          <table class="table table-hover mt-3">
            <thead>
              <tr>
                <th>Data</th>
                <th>Especialidade</th>
                <th>Médico</th>
                <th>Status</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let ag of agendamentosFuturos">
                <td>{{ ag.dataConsulta | date:'dd/MM/yyyy HH:mm' }}</td>
                <td>{{ ag.especialidade.nome }}</td>
                <td>{{ ag.medico.nome }}</td>
                <td><span class="badge bg-primary">{{ ag.status }}</span></td>
                <td>
                  <button class="btn btn-sm btn-info me-2" [routerLink]="['/paciente/agendamento', ag.id]">Detalhes</button>
                  <button class="btn btn-sm btn-success" *ngIf="ag.podeFazerCheckin">Check-in</button>
                </td>
              </tr>
              <tr *ngIf="agendamentosFuturos.length === 0">
                <td colspan="5" class="text-center">Nenhum agendamento futuro.</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="tab-pane fade" id="realizados" role="tabpanel">
          <table class="table table-hover mt-3">
            <tbody>
              <tr *ngFor="let ag of agendamentosRealizados">
                 </tr>
            </tbody>
          </table>
        </div>

        <div class="tab-pane fade" id="cancelados" role="tabpanel">
           <table class="table table-hover mt-3">
            <tbody>
              <tr *ngFor="let ag of agendamentosCancelados">
                 </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>